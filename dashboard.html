<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ููุญุฉ ุงูุชุญูู | VIP</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css"> 
    
    <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script defer src="script.js"></script>
</head>
<body class="pb-24">

    <div class="p-4 max-w-5xl mx-auto relative z-10">
        <div class="glass-panel flex justify-between items-center mb-6 p-4 rounded-2xl">
            <span id="conn-status" class="text-yellow-500 text-xs font-bold">ุฌุงุฑู ุงูุงุชุตุงู... โณ</span>
            <button onclick="logOut()" class="bg-red-900/80 text-red-300 border border-red-500 px-4 py-2 rounded-xl text-xs font-bold">ุฎุฑูุฌ ๐</button>
        </div>

        <nav class="flex gap-2 mb-6 overflow-x-auto pb-2">
            <button class="nav-btn active" onclick="showTab('room', this)">ุงููุฌููุนุงุช</button>
            <button class="nav-btn" onclick="showTab('users', this)">ุงููุชุณุงุจููู</button>
            <button class="nav-btn" onclick="showTab('final', this)">ุงูุฏูุฑ ุงูุฃุฎูุฑ ๐</button>
            <button class="nav-btn" onclick="showTab('global', this)">ุงูุชุฑุชูุจ</button>
            <button class="nav-btn" onclick="showTab('quizzes', this)">ุงููููุฒ</button>
            <button class="nav-btn" onclick="showTab('vault', this)">ุงูุฎุฒูุฉ</button>
            <button class="nav-btn" onclick="showTab('settings', this)">ุงูุฑุณุงุฆู</button>
        </nav>

        <div id="tab-room" class="tab-content active">
            <div class="glass-panel p-5 rounded-2xl mb-6">
                <h3 class="text-yellow-500 font-bold mb-4 text-sm">ุฅูุดุงุก ูุฌููุนุฉ ุฌุฏูุฏุฉ</h3>
                <input type="text" id="g-name" placeholder="ุงุณู ุงููุฌููุนุฉ..." class="w-full p-3 rounded-xl mb-3">
                <div class="mb-3">
                    <select id="g-type" onchange="toggleGroupInputs()" class="w-full p-3 rounded-xl">
                        <option value="teams">ูุจุงุฑุงุฉ (ุชูู ุถุฏ ุชูู)</option>
                        <option value="single">ูุฑุฏู (ูุฌููุนุฉ ุฃูุฑุงุฏ)</option>
                    </select>
                </div>
                <div id="teams-input-area" class="grid grid-cols-2 gap-3 mb-3">
                    <input type="text" id="t1" placeholder="ุชูู 1" class="p-3 rounded-xl">
                    <input type="text" id="t2" placeholder="ุชูู 2" class="p-3 rounded-xl">
                </div>
                <button onclick="saveGrp()" class="gold-btn w-full p-3 rounded-xl text-lg">ุฅุถุงูุฉ ุงููุฌููุนุฉ โ</button>
            </div>
            <div id="grp-list" class="space-y-3"></div>
        </div>

        <div id="tab-users" class="tab-content">
            <div class="glass-panel p-5 rounded-2xl mb-6">
                <h3 class="text-yellow-500 font-bold mb-4 text-sm">ุชุณุฌูู ูุงุนุจ ุฌุฏูุฏ</h3>
                <input type="text" id="u-name" placeholder="ุงุณู ุงููุงุนุจ" class="w-full p-3 rounded-xl mb-3">
                <div class="grid grid-cols-2 gap-3 mb-3">
                    <select id="u-group" onchange="loadTeams()" class="p-3 rounded-xl text-xs"><option value="">ุงุฎุชุฑ ุงููุฌููุนุฉ</option></select>
                    <select id="u-team" class="p-3 rounded-xl text-xs"><option value="">ุงุฎุชุฑ ุงูุชูู</option></select>
                </div>
                <button onclick="addUsr()" class="gold-btn w-full p-3 rounded-xl text-lg">ุฅูุดุงุก ุงูุญุณุงุจ ๐</button>
            </div>
            <div class="glass-panel rounded-2xl overflow-x-auto">
                <table class="w-full text-right text-xs">
                    <thead class="bg-gray-800 text-gray-400"><tr><th class="p-4">ุงููุชุณุงุจู</th><th class="p-4 text-center">ุงูููุงุท</th><th class="p-4 text-center">ุชุญูู</th></tr></thead>
                    <tbody id="usr-list"></tbody>
                </table>
            </div>
        </div>

        <div id="tab-final" class="tab-content">
            <div class="glass-panel p-5 rounded-2xl mb-6 border border-yellow-500 shadow-[0_0_15px_rgba(212,175,55,0.2)]">
                <h3 class="text-yellow-500 font-black mb-2 text-lg"><i class="fas fa-trophy"></i> ุชุตููุงุช ุงูุฏูุฑ ุงูุฃุฎูุฑ</h3>
                <p class="text-xs text-gray-300 font-bold">ุงูููุตู ููููู ุงููุนุจ ูุชุฌููุน ุงูููุงุท ููุชุฑุชูุจ ุงูุนุงูุ ูููู ูุนุชุจุฑ ุฎุงุฑุฌ ุงูููุงูุณุฉ ุงูููุงุฆูุฉ ููุจุทููุฉ.</p>
            </div>
            <div class="glass-panel rounded-2xl overflow-x-auto">
                <table class="w-full text-right text-xs">
                    <thead class="bg-gray-800 text-gray-400">
                        <tr>
                            <th class="p-4">ุงููุชุณุงุจู</th>
                            <th class="p-4 text-center">ุงูุญุงูุฉ</th>
                            <th class="p-4 text-center">ุงูููุงุท</th>
                            <th class="p-4 text-center">ุชุญูู</th>
                        </tr>
                    </thead>
                    <tbody id="final-list"></tbody>
                </table>
            </div>
        </div>

        <div id="tab-global" class="tab-content">
            <div id="global-tables-container" class="space-y-6"></div>
        </div>

        <div id="tab-quizzes" class="tab-content">
            <div class="glass-panel p-5 rounded-2xl mb-4">
                <div class="flex gap-3 mb-3">
                    <select id="q-day" class="flex-1 p-3 rounded-xl text-yellow-500 font-bold border-yellow-600"></select>
                    <select id="q-var" class="w-1/3 p-3 rounded-xl text-blue-400 font-bold border-blue-600">
                        <option value="0">ูุณุฎุฉ 1</option><option value="1">ูุณุฎุฉ 2</option><option value="2">ูุณุฎุฉ 3</option><option value="3">ูุณุฎุฉ 4</option><option value="4">ูุณุฎุฉ 5</option><option value="5">ูุณุฎุฉ 6</option>
                    </select>
                </div>
                <button onclick="loadQ()" class="w-full bg-blue-900/80 text-blue-300 border border-blue-500 p-3 rounded-xl font-bold">โฌ๏ธ ุงุณุชุฏุนุงุก ุงูุฃุณุฆูุฉ ููุชุนุฏูู</button>
            </div>
            <div id="q-area" class="space-y-3"></div>
            <button onclick="saveQ()" class="gold-btn w-full p-4 rounded-xl mt-4 text-lg">๐พ ุญูุธ ุงููุณุฎุฉ</button>
        </div>

        <div id="tab-vault" class="tab-content space-y-4">
            <div class="glass-panel p-6 rounded-2xl text-center">
                <h3 class="mb-4 font-bold text-yellow-500">ุงูุญุงูุฉ ุงููุจุงุดุฑุฉ</h3>
                <select id="pub-day" class="w-full p-3 rounded-xl mb-4 font-bold"></select>
                <div class="flex gap-2">
                    <button onclick="setStatus('soon')" class="flex-1 bg-blue-900 text-blue-300 p-3 rounded-xl font-bold">ูุฑูุจุงู</button>
                    <button onclick="setStatus('active')" class="flex-1 bg-green-500 text-black p-3 rounded-xl font-black">ุชูุนูู โถ๏ธ</button>
                    <button onclick="setStatus('closed')" class="flex-1 bg-red-900 text-red-300 p-3 rounded-xl font-bold">ุฅุบูุงู ๐</button>
                </div>
            </div>
        </div>

        <div id="tab-settings" class="tab-content space-y-4">
            <div class="glass-panel p-5 rounded-2xl border-r-4 border-yellow-500">
                <p class="text-yellow-500 text-xs mb-2 font-bold">ุฑุณุงูุฉ ุงูุจุทู ุงูุทุงุฆุฑุฉ:</p>
                <input type="text" id="msg-champ" placeholder="ุงูุชุจ ุงูุฑุณุงูุฉ..." class="w-full p-3 rounded-xl mb-3">
                <button onclick="saveMessage('champData')" class="gold-btn w-full p-3 rounded-xl">ูุดุฑ ุงูุฑุณุงูุฉ</button>
            </div>
            <div class="glass-panel p-5 rounded-2xl border-r-4 border-blue-500">
                <p class="text-blue-400 text-xs mb-2 font-bold">ุงูุดุฑูุท ุงูุฅุฎุจุงุฑู:</p>
                <textarea id="msg-daily" placeholder="ุชูุจููุงุช ูุฃุฎุจุงุฑ..." class="w-full p-3 rounded-xl mb-3 h-24"></textarea>
                <button onclick="saveMessage('dailyData')" class="bg-blue-600 text-white font-bold w-full p-3 rounded-xl">ุชุญุฏูุซ</button>
            </div>
        </div>
    </div>

    <div id="edit-group-modal" class="modal-overlay">
        <div class="glass-panel p-6 rounded-3xl border border-blue-500 w-full max-w-sm">
            <h3 class="text-blue-400 font-black mb-4 text-center text-xl">ุชุนุฏูู ุงููุฌููุนุฉ</h3>
            <input type="text" id="edit-g-name" placeholder="ุงุณู ุงููุฌููุนุฉ ุงูุฌุฏูุฏ" class="w-full p-3 rounded-xl mb-3 text-sm">
            <div class="mb-3">
                <select id="edit-g-type" onchange="toggleEditGroupInputs()" class="w-full p-3 rounded-xl text-sm">
                    <option value="teams">ูุจุงุฑุงุฉ (ุชูู ุถุฏ ุชูู)</option>
                    <option value="single">ูุฑุฏู (ูุฌููุนุฉ ุฃูุฑุงุฏ)</option>
                </select>
            </div>
            <div id="edit-teams-input-area" class="grid grid-cols-2 gap-3 mb-4">
                <input type="text" id="edit-t1" placeholder="ุชูู 1" class="p-3 rounded-xl text-sm">
                <input type="text" id="edit-t2" placeholder="ุชูู 2" class="p-3 rounded-xl text-sm">
            </div>
            <div class="flex gap-2">
                <button onclick="saveEditedGrp()" class="flex-1 bg-blue-600 text-white font-black p-3 rounded-xl">ุญูุธ ุงูุชุนุฏููุงุช</button>
                <button onclick="document.getElementById('edit-group-modal').style.display='none'" class="flex-1 bg-gray-800 text-white p-3 rounded-xl font-bold">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <div id="edit-user-modal" class="modal-overlay">
        <div class="glass-panel p-6 rounded-3xl border border-purple-500 w-full max-w-sm">
            <h3 class="text-purple-400 font-black mb-4 text-center text-xl">ุชุนุฏูู ุจูุงูุงุช ุงููุงุนุจ</h3>
            <input type="text" id="edit-u-name" placeholder="ุงุณู ุงููุงุนุจ" class="w-full p-3 rounded-xl mb-3 text-sm">
            <label class="block text-[10px] text-gray-400 mb-1">ููู ููุฌููุนุฉ ุฃุฎุฑู:</label>
            <select id="edit-u-group" onchange="loadEditUserTeams()" class="w-full p-3 rounded-xl mb-3 text-sm"></select>
            <label class="block text-[10px] text-gray-400 mb-1">ููู ูุชูู ุขุฎุฑ:</label>
            <select id="edit-u-team" class="w-full p-3 rounded-xl mb-4 text-sm"></select>
            
            <div class="flex gap-2">
                <button onclick="saveEditedUsr()" class="flex-1 bg-purple-600 text-white font-black p-3 rounded-xl">ุชุญุฏูุซ ุงููุงุนุจ</button>
                <button onclick="document.getElementById('edit-user-modal').style.display='none'" class="flex-1 bg-gray-800 text-white p-3 rounded-xl font-bold">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <div id="copy-modal" class="modal-overlay">
        <div class="glass-panel p-8 rounded-3xl border border-green-500 w-full max-w-xs text-center">
            <p class="text-white font-bold mb-6 text-lg">ุชู ุงูุชุณุฌูู ุจูุฌุงุญ!</p>
            <button id="cp-btn" class="w-full bg-green-600 text-black p-4 rounded-xl font-black mb-3">ูุณุฎ ุงูุจูุงูุงุช</button>
            <button onclick="document.getElementById('copy-modal').style.display='none'" class="w-full bg-gray-800 text-white p-3 rounded-xl font-bold">ุฅุบูุงู</button>
        </div>
    </div>

    <div id="user-profile-modal" class="modal-overlay">
        <div class="glass-panel p-6 rounded-3xl border border-purple-500/50 w-full max-w-md max-h-[85vh] overflow-y-auto relative">
            <button onclick="document.getElementById('user-profile-modal').style.display='none'" class="absolute top-4 left-4 w-8 h-8 bg-gray-800 rounded-full text-gray-400 hover:text-white flex items-center justify-center font-bold">&times;</button>
            <div class="text-center border-b border-gray-700 pb-4 mb-4 mt-2">
                <i class="fas fa-user-astronaut text-4xl text-purple-400 mb-2"></i>
                <h2 id="prof-name" class="text-2xl font-black text-white">...</h2>
                <p id="prof-team" class="text-xs text-purple-300 font-bold mt-1 bg-purple-900/30 inline-block px-3 py-1 rounded-full">...</p>
            </div>
            <div class="bg-gradient-to-r from-yellow-900/40 to-yellow-600/40 border border-yellow-600/50 rounded-2xl p-4 text-center mb-6">
                <p class="text-xs text-gray-300 font-bold mb-1">ุฅุฌูุงูู ุงูููุงุท</p>
                <p id="prof-score" class="text-4xl font-black text-yellow-400">0</p>
            </div>
            <h3 class="text-white font-bold mb-3 flex items-center gap-2"><i class="fas fa-history text-purple-400"></i> ุณุฌู ุงูุงุฎุชุจุงุฑุงุช</h3>
            <div id="prof-logs" class="space-y-2"></div>
        </div>
    </div>
</body>
</html>
